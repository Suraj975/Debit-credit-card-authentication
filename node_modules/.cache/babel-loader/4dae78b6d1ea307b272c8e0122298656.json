{"ast":null,"code":"import _toConsumableArray from \"/Users/surajsingh/Downloads/Debit-credit-card-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/surajsingh/Downloads/Debit-credit-card-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/surajsingh/Downloads/Debit-credit-card-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/surajsingh/Downloads/Debit-credit-card-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/surajsingh/Downloads/Debit-credit-card-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _taggedTemplateLiteral from \"/Users/surajsingh/Downloads/Debit-credit-card-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/surajsingh/Downloads/Debit-credit-card-authentication/src/addCards.js\";\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 13px;\\n  font-weight: bold;\\n  color: red;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n\\n  div {\\n    margin-left: 25px;\\n\\n    button {\\n      padding: 6px;\\n      border-radius: 10px;\\n      width: 80px;\\n    }\\n\\n    .btn-grad {\\n      background-image: linear-gradient(\\n        to right,\\n        #f09819 0%,\\n        #edde5d 51%,\\n        #f09819 100%\\n      );\\n    }\\n    .btn-grad:hover {\\n      background-position: right center;\\n    }\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  height: 65px;\\n  width: 90%;\\n  input {\\n    width: \", \";\\n    height: 30px;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  button {\\n    margin-right: 10px;\\n  }\\n  .expiry {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  .cvc {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  width: 400px;\\n  height: 60px;\\n  color: white;\\n  border-radius: 8px;\\n  margin-bottom: 10px;\\n  cursor: pointer;\\n  border:1px solid white;\\n  }\\n\\n  :hover{\\n    background: #ffb347;  /* fallback for old browsers */\\nbackground: -webkit-linear-gradient(to top, #ffcc33, #ffb347);  /* Chrome 10-25, Safari 5.1-6 */\\nbackground: linear-gradient(to top, #ffcc33, #ffb347); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\\n\\n  }\\n  .plusFont {\\n    font-size: 34px;\\n    width: 50px;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    border: 1px solid;\\n    border-radius: 50%;\\n    margin-left: 10px;\\n    height: 50px;\\n    cursor: pointer;\\n  }\\n  .text {\\n    width: 100%;\\n    font-weight: 800;\\n    font-size: 20px;\\n    text-align: center;\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  color: white;\\n  width: 400px;\\n  height: 250px;\\n  border-radius: 8px;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  border: 1px solid white;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport MaskedInput from \"react-text-mask\";\nimport styled from \"styled-components\";\nimport { AMERICANEXPRESS, OTHERCARDS, EXPIRYDATE, CVC, CARDARR, CARDICON } from \"./constant\";\nimport { stripeCardNumberValidation, stripeCardExpirValidation, textWithSpacesOnly, minLength } from \"./validations\";\nvar Wrapper = styled.div(_templateObject());\nvar Add = styled.div(_templateObject2());\nvar BottomBox = styled.div(_templateObject3());\nvar Inputs = styled.div(_templateObject4(), function (_ref) {\n  var inputSize = _ref.inputSize;\n  return inputSize === \"small\" ? \"85%\" : \"100%\";\n});\nvar Buttons = styled.div(_templateObject5());\nvar Error = styled.span(_templateObject6());\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case \"card\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        card: action.data\n      });\n\n    case \"expiry\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        expiry: action.data\n      });\n\n    case \"securityCode\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        securityCode: action.data\n      });\n\n    case \"cardHodler\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cardHodler: action.data\n      });\n\n    case \"cleanState\":\n      return _objectSpread({}, action.data);\n\n    default:\n      return state;\n  }\n};\n\nfunction findDebitCardType(cardNumber) {\n  var regexPattern = {\n    MASTERCARD: /^5[1-5][0-9]{1,}|^2[2-7][0-9]{1,}$/,\n    VISA: /^4[0-9]{2,}$/,\n    AMERICAN_EXPRESS: /^3[47][0-9]{5,}$/,\n    DISCOVER: /^6(?:011|5[0-9]{2})[0-9]{3,}$/,\n    DINERS_CLUB: /^3(?:0[0-5]|[68][0-9])[0-9]{4,}$/,\n    JCB: /^(?:2131|1800|35[0-9]{3})[0-9]{3,}$/\n  };\n\n  for (var card in regexPattern) {\n    if (cardNumber.replace(/[^\\d]/g, \"\").match(regexPattern[card])) return card;\n  }\n\n  return \"\";\n}\n\nvar AddCard = function AddCard(props) {\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      error = _React$useState2[0],\n      setError = _React$useState2[1];\n\n  var _React$useState3 = React.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      cardType = _React$useState4[0],\n      setCardType = _React$useState4[1];\n\n  var _React$useReducer = React.useReducer(reducer, {\n    card: \"\",\n    expiry: \"\",\n    securityCode: \"\",\n    cardHodler: \"\"\n  }),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      state = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  var handleValidations = function handleValidations(type, value) {\n    var errorText;\n\n    switch (type) {\n      case \"card\":\n        setCardType(findDebitCardType(value));\n        errorText = stripeCardNumberValidation(value);\n        setError(_objectSpread(_objectSpread({}, error), {}, {\n          cardError: errorText\n        }));\n        break;\n\n      case \"cardHodler\":\n        errorText = value === \"\" ? \"Required\" : textWithSpacesOnly(value);\n        setError(_objectSpread(_objectSpread({}, error), {}, {\n          cardHodlerError: errorText\n        }));\n        break;\n\n      case \"expiry\":\n        errorText = value === \"\" ? \"Required\" : stripeCardExpirValidation(value);\n        setError(_objectSpread(_objectSpread({}, error), {}, {\n          expiryError: errorText\n        }));\n        break;\n\n      case \"securityCode\":\n        errorText = value === \"\" ? \"Required\" : minLength(3)(value);\n        setError(_objectSpread(_objectSpread({}, error), {}, {\n          securityCodeError: errorText\n        }));\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  var handleInputData = function handleInputData(e) {\n    dispatch({\n      type: e.target.name,\n      data: e.target.value\n    });\n  };\n\n  var openCard = function openCard() {\n    props.setCard(!props.addCard);\n  };\n\n  var handleBlur = function handleBlur(e) {\n    handleValidations(e.target.name, e.target.value);\n  };\n\n  var checkErrorBeforeSave = function checkErrorBeforeSave() {\n    var errorValue = {};\n    var isError = false;\n    Object.keys(state).forEach( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(val) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (state[val] === \"\") {\n                  errorValue = _objectSpread(_objectSpread({}, errorValue), {}, {\n                    [\"\".concat(val + \"Error\")]: \"Required\"\n                  });\n                  isError = true;\n                }\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    setError(errorValue);\n    return isError;\n  };\n\n  var handleSave = function handleSave(e) {\n    var errorCheck = checkErrorBeforeSave();\n\n    if (!errorCheck) {\n      props.setCardList([].concat(_toConsumableArray(props.cardList), [_objectSpread(_objectSpread({}, state), {}, {\n        cardType\n      })]));\n      dispatch(\"cleanState\", {\n        card: \"\",\n        expiry: \"\",\n        securityCode: \"\",\n        cardHodler: \"\"\n      });\n      props.setCard(false);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Add, {\n    onClick: openCard,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  }, \"Add Card\")), /*#__PURE__*/React.createElement(\"form\", {\n    style: {\n      marginBottom: \"10px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }, props.addCard && /*#__PURE__*/React.createElement(Wrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Inputs, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MaskedInput, {\n    mask: [\"37\", \"34\"].includes(state && state.card.split(\"\").splice(0, 2).join(\"\")) ? AMERICANEXPRESS : OTHERCARDS,\n    guide: false,\n    placeholderChar: \"\\u2000\",\n    placeholder: \"Card Number\",\n    name: \"card\",\n    required: true,\n    value: state.card,\n    onChange: handleInputData,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 15\n    }\n  }), (!error || !error.cardError) && CARDARR.includes(cardType) && /*#__PURE__*/React.createElement(\"img\", {\n    style: {\n      float: \"right\",\n      position: \"relative\",\n      top: \"-35px\"\n    },\n    src: CARDICON[cardType],\n    alt: \"card\",\n    width: \"50px\",\n    height: \"33px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 17\n    }\n  }), error && error.cardError && error.cardError.length > 1 && /*#__PURE__*/React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }\n  }, error.cardError)), /*#__PURE__*/React.createElement(Inputs, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"cardHodler\",\n    required: true,\n    placeholder: \"CardHolder's Name\",\n    value: state.cardHodler,\n    onChange: handleInputData,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }), error && error.cardHodlerError && error.cardHodlerError.length > 1 && /*#__PURE__*/React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 19\n    }\n  }, error.cardHodlerError)), /*#__PURE__*/React.createElement(Inputs, {\n    inputSize: \"small\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(BottomBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"expiry\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MaskedInput, {\n    mask: EXPIRYDATE,\n    guide: false,\n    name: \"expiry\",\n    required: true,\n    placeholderChar: \"\\u2000\",\n    placeholder: \"Expiry Date (MM/YY)\",\n    value: state.expiry,\n    onChange: handleInputData,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 19\n    }\n  }), error && error.expiryError && error.expiryError.length > 1 && /*#__PURE__*/React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 23\n    }\n  }, error.expiryError)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cvc\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MaskedInput, {\n    mask: CVC,\n    guide: false,\n    name: \"securityCode\",\n    required: true,\n    placeholderChar: \"\\u2000\",\n    placeholder: \"Secuirty Code\",\n    value: state.securityCode,\n    onChange: handleInputData,\n    onBlur: handleBlur,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 19\n    }\n  }), error && error.securityCodeError && error.securityCodeError.length > 1 && /*#__PURE__*/React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 23\n    }\n  }, error.securityCodeError)))), /*#__PURE__*/React.createElement(Buttons, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn-grad\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 17\n    }\n  }, \"Close\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn-grad\",\n    type: \"button\",\n    onClick: handleSave,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 17\n    }\n  }, \"Add Card\"))))));\n};\n\nexport default AddCard;","map":{"version":3,"sources":["/Users/surajsingh/Downloads/Debit-credit-card-authentication/src/addCards.js"],"names":["React","MaskedInput","styled","AMERICANEXPRESS","OTHERCARDS","EXPIRYDATE","CVC","CARDARR","CARDICON","stripeCardNumberValidation","stripeCardExpirValidation","textWithSpacesOnly","minLength","Wrapper","div","Add","BottomBox","Inputs","inputSize","Buttons","Error","span","reducer","state","action","type","card","data","expiry","securityCode","cardHodler","findDebitCardType","cardNumber","regexPattern","MASTERCARD","VISA","AMERICAN_EXPRESS","DISCOVER","DINERS_CLUB","JCB","replace","match","AddCard","props","useState","error","setError","cardType","setCardType","useReducer","dispatch","handleValidations","value","errorText","cardError","cardHodlerError","expiryError","securityCodeError","handleInputData","e","target","name","openCard","setCard","addCard","handleBlur","checkErrorBeforeSave","errorValue","isError","Object","keys","forEach","val","handleSave","errorCheck","setCardList","cardList","marginBottom","includes","split","splice","join","float","position","top","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport MaskedInput from \"react-text-mask\";\nimport styled from \"styled-components\";\nimport {\n  AMERICANEXPRESS,\n  OTHERCARDS,\n  EXPIRYDATE,\n  CVC,\n  CARDARR,\n  CARDICON\n} from \"./constant\";\nimport {\n  stripeCardNumberValidation,\n  stripeCardExpirValidation,\n  textWithSpacesOnly,\n  minLength\n} from \"./validations\";\n\nconst Wrapper = styled.div`\n  color: white;\n  width: 400px;\n  height: 250px;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid white;\n`;\n\nconst Add = styled.div`\n  display: flex;\n  align-items: center;\n  width: 400px;\n  height: 60px;\n  color: white;\n  border-radius: 8px;\n  margin-bottom: 10px;\n  cursor: pointer;\n  border:1px solid white;\n  }\n\n  :hover{\n    background: #ffb347;  /* fallback for old browsers */\nbackground: -webkit-linear-gradient(to top, #ffcc33, #ffb347);  /* Chrome 10-25, Safari 5.1-6 */\nbackground: linear-gradient(to top, #ffcc33, #ffb347); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\n\n  }\n  .plusFont {\n    font-size: 34px;\n    width: 50px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border: 1px solid;\n    border-radius: 50%;\n    margin-left: 10px;\n    height: 50px;\n    cursor: pointer;\n  }\n  .text {\n    width: 100%;\n    font-weight: 800;\n    font-size: 20px;\n    text-align: center;\n  }\n`;\n\nconst BottomBox = styled.div`\n  display: flex;\n  button {\n    margin-right: 10px;\n  }\n  .expiry {\n    display: flex;\n    flex-direction: column;\n  }\n  .cvc {\n    display: flex;\n    flex-direction: column;\n  }\n`;\n\nconst Inputs = styled.div`\n  height: 65px;\n  width: 90%;\n  input {\n    width: ${({ inputSize }) => (inputSize === \"small\" ? \"85%\" : \"100%\")};\n    height: 30px;\n  }\n`;\n\nconst Buttons = styled.div`\n  width: 100%;\n  display: flex;\n\n  div {\n    margin-left: 25px;\n\n    button {\n      padding: 6px;\n      border-radius: 10px;\n      width: 80px;\n    }\n\n    .btn-grad {\n      background-image: linear-gradient(\n        to right,\n        #f09819 0%,\n        #edde5d 51%,\n        #f09819 100%\n      );\n    }\n    .btn-grad:hover {\n      background-position: right center;\n    }\n  }\n`;\n\nconst Error = styled.span`\n  font-size: 13px;\n  font-weight: bold;\n  color: red;\n`;\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"card\":\n      return { ...state, card: action.data };\n    case \"expiry\":\n      return { ...state, expiry: action.data };\n    case \"securityCode\":\n      return { ...state, securityCode: action.data };\n    case \"cardHodler\":\n      return { ...state, cardHodler: action.data };\n    case \"cleanState\":\n      return { ...action.data };\n    default:\n      return state;\n  }\n};\n\nfunction findDebitCardType(cardNumber) {\n  const regexPattern = {\n    MASTERCARD: /^5[1-5][0-9]{1,}|^2[2-7][0-9]{1,}$/,\n    VISA: /^4[0-9]{2,}$/,\n    AMERICAN_EXPRESS: /^3[47][0-9]{5,}$/,\n    DISCOVER: /^6(?:011|5[0-9]{2})[0-9]{3,}$/,\n    DINERS_CLUB: /^3(?:0[0-5]|[68][0-9])[0-9]{4,}$/,\n    JCB: /^(?:2131|1800|35[0-9]{3})[0-9]{3,}$/\n  };\n  for (const card in regexPattern) {\n    if (cardNumber.replace(/[^\\d]/g, \"\").match(regexPattern[card])) return card;\n  }\n  return \"\";\n}\n\nconst AddCard = (props) => {\n  const [error, setError] = React.useState({});\n  const [cardType, setCardType] = React.useState();\n  const [state, dispatch] = React.useReducer(reducer, {\n    card: \"\",\n    expiry: \"\",\n    securityCode: \"\",\n    cardHodler: \"\"\n  });\n\n  const handleValidations = (type, value) => {\n    let errorText;\n    switch (type) {\n      case \"card\":\n        setCardType(findDebitCardType(value));\n        errorText = stripeCardNumberValidation(value);\n        setError({ ...error, cardError: errorText });\n        break;\n      case \"cardHodler\":\n        errorText = value === \"\" ? \"Required\" : textWithSpacesOnly(value);\n        setError({ ...error, cardHodlerError: errorText });\n        break;\n      case \"expiry\":\n        errorText =\n          value === \"\" ? \"Required\" : stripeCardExpirValidation(value);\n        setError({ ...error, expiryError: errorText });\n        break;\n      case \"securityCode\":\n        errorText = value === \"\" ? \"Required\" : minLength(3)(value);\n        setError({ ...error, securityCodeError: errorText });\n        break;\n      default:\n        break;\n    }\n  };\n\n  const handleInputData = (e) => {\n    dispatch({ type: e.target.name, data: e.target.value });\n  };\n  const openCard = () => {\n    props.setCard(!props.addCard);\n  };\n\n  const handleBlur = (e) => {\n    handleValidations(e.target.name, e.target.value);\n  };\n\n  const checkErrorBeforeSave = () => {\n    let errorValue = {};\n    let isError = false;\n    Object.keys(state).forEach(async (val) => {\n      if (state[val] === \"\") {\n        errorValue = { ...errorValue, [`${val + \"Error\"}`]: \"Required\" };\n        isError = true;\n      }\n    });\n    setError(errorValue);\n    return isError;\n  };\n\n  const handleSave = (e) => {\n    let errorCheck = checkErrorBeforeSave();\n    if (!errorCheck) {\n      props.setCardList([...props.cardList, { ...state, cardType }]);\n      dispatch(\"cleanState\", {\n        card: \"\",\n        expiry: \"\",\n        securityCode: \"\",\n        cardHodler: \"\"\n      });\n      props.setCard(false);\n    }\n  };\n  return (\n    <>\n      <Add onClick={openCard}>\n        {/* <div onClick={openCard} className=\"plusFont\">\n          +\n        </div> */}\n        <div className=\"text\">Add Card</div>\n      </Add>\n      <form style={{ marginBottom: \"10px\" }}>\n        {props.addCard && (\n          <Wrapper>\n            <Inputs>\n              <MaskedInput\n                mask={\n                  [\"37\", \"34\"].includes(\n                    state && state.card.split(\"\").splice(0, 2).join(\"\")\n                  )\n                    ? AMERICANEXPRESS\n                    : OTHERCARDS\n                }\n                guide={false}\n                placeholderChar={\"\\u2000\"}\n                placeholder=\"Card Number\"\n                name=\"card\"\n                required\n                value={state.card}\n                onChange={handleInputData}\n                onBlur={handleBlur}\n              />\n              {(!error || !error.cardError) && CARDARR.includes(cardType) && (\n                <img\n                  style={{\n                    float: \"right\",\n                    position: \"relative\",\n                    top: \"-35px\"\n                  }}\n                  src={CARDICON[cardType]}\n                  alt=\"card\"\n                  width=\"50px\"\n                  height=\"33px\"\n                />\n              )}\n              {error && error.cardError && error.cardError.length > 1 && (\n                <Error>{error.cardError}</Error>\n              )}\n            </Inputs>\n            <Inputs>\n              <input\n                type=\"text\"\n                name=\"cardHodler\"\n                required\n                placeholder=\"CardHolder's Name\"\n                value={state.cardHodler}\n                onChange={handleInputData}\n                onBlur={handleBlur}\n              />\n              {error &&\n                error.cardHodlerError &&\n                error.cardHodlerError.length > 1 && (\n                  <Error>{error.cardHodlerError}</Error>\n                )}\n            </Inputs>\n            <Inputs inputSize=\"small\">\n              <BottomBox>\n                <div className=\"expiry\">\n                  <MaskedInput\n                    mask={EXPIRYDATE}\n                    guide={false}\n                    name=\"expiry\"\n                    required\n                    placeholderChar={\"\\u2000\"}\n                    placeholder=\"Expiry Date (MM/YY)\"\n                    value={state.expiry}\n                    onChange={handleInputData}\n                    onBlur={handleBlur}\n                  />\n                  {error &&\n                    error.expiryError &&\n                    error.expiryError.length > 1 && (\n                      <Error>{error.expiryError}</Error>\n                    )}\n                </div>\n                <div className=\"cvc\">\n                  <MaskedInput\n                    mask={CVC}\n                    guide={false}\n                    name=\"securityCode\"\n                    required\n                    placeholderChar={\"\\u2000\"}\n                    placeholder=\"Secuirty Code\"\n                    value={state.securityCode}\n                    onChange={handleInputData}\n                    onBlur={handleBlur}\n                  />\n                  {error &&\n                    error.securityCodeError &&\n                    error.securityCodeError.length > 1 && (\n                      <Error>{error.securityCodeError}</Error>\n                    )}\n                </div>\n              </BottomBox>\n            </Inputs>\n            <Buttons>\n              <div className=\"button\">\n                <button className=\"btn-grad\">Close</button>\n              </div>\n              <div className=\"button\">\n                <button className=\"btn-grad\" type=\"button\" onClick={handleSave}>\n                  Add Card\n                </button>\n              </div>\n            </Buttons>\n          </Wrapper>\n        )}\n      </form>\n    </>\n  );\n};\n\nexport default AddCard;\n"]},"metadata":{},"sourceType":"module"}